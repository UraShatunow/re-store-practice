{"version":3,"sources":["store.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","ShopHeader","_ref","numItems","total","react_default","a","createElement","className","Link","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","Object","assign","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","key","id","components_book_list_item","BookListContainer","this","_this$props","loading","error","components_spinner","components_error_indicator","book_list_BookList","Component","connect","_ref2","_ref2$bookList","bookList","_ref3","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","_ref2$shoppingCart","shoppingCart","items","cartItems","orderTotal","item","idx","count","HomePage","components_book_list","shopping_cart_table_shopping_cart_table","CartPage","App","role","components_shop_header","Switch","Route","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","render","es","error_boundry","value","BrowserRouter","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.f9db350d.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\n\r\nimport reducer from './reducers';\r\n\r\n\r\nconst logMiddleware = ({ getState }) => (next) => (action) => {\r\n  console.log(action.type, getState());\r\n  return next(action);\r\n};\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n  if (typeof action === 'string') {\r\n    return next({\r\n      type: action\r\n    });\r\n  }\r\n\r\n  return next(action);\r\n};\r\n\r\nconst store = createStore(reducer, applyMiddleware(\r\n  thunkMiddleware, stringMiddleware, logMiddleware));\r\n\r\n\r\nconst delayedActionCreator = (timeout) => (dispatch) => {\r\n  setTimeout(() => dispatch({\r\n    type: 'DELAYED_ACTION'\r\n  }), timeout);\r\n};\r\n\r\nstore.dispatch(delayedActionCreator(3000));\r\n\r\nexport default store;\r\n","import ShopHeader from './shop-header';\r\n\r\nexport default ShopHeader;","import React from 'react';\r\nimport './shop-header.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/\">\r\n        <div className=\"logo text-dark\">ReStore</div>\r\n      </Link>\r\n      <Link to=\"/cart\">\r\n        <div className=\"shopping-cart\">\r\n          <i className=\"cart-icon fa fa-shopping-cart\" />\r\n          {numItems} items (${total})\r\n        </div>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default ShopHeader;\r\n","import BookListItem from './book-list-item';\r\n\r\nexport default BookListItem;\r\n","import React from 'react';\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n  const { title, author, price, coverImage } = book;\r\n  return (\r\n    <div className=\"book-list-item\">\r\n      <div className=\"book-cover\">\r\n        <img src={coverImage} alt=\"cover\" />\r\n      </div>\r\n      <div className=\"book-details\">\r\n        <span className=\"book-title\">{title}</span>\r\n        <div className=\"book-author\">{author}</div>\r\n        <div className=\"book-price\">${price}</div>\r\n        <button\r\n          onClick={onAddedToCart}\r\n          className=\"btn btn-info add-to-cart\">\r\n          Add to cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookListItem;\r\n","import React from 'react';\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n};\r\n","import React from 'react';\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return (<Wrapped {...props}\r\n                     bookstoreService={bookstoreService}/>);\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    );\r\n  }\r\n};\r\n\r\nexport default withBookstoreService;\r\n","\r\nconst booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST'\r\n  };\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error\r\n  };\r\n};\r\n\r\nexport const bookAddedToCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_ADDED_TO_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const bookRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'BOOK_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nexport const allBooksRemovedFromCart = (bookId) => {\r\n  return {\r\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n    payload: bookId\r\n  };\r\n};\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n    .then((data) => dispatch(booksLoaded(data)))\r\n    .catch((err) => dispatch(booksError(err)));\r\n};\r\n\r\nexport {\r\n  fetchBooks\r\n};\r\n","const compose = (...funcs) => (comp) => {\r\n  return funcs.reduceRight(\r\n    (wrapped, f) => f(wrapped), comp);\r\n};\r\n\r\nexport default compose;\r\n","import Spinner from './spinner';\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\nimport './spinner.css';\r\n\r\nconst Spinner = () => {\r\n  return <div>loading...</div>;\r\n};\r\n\r\nexport default Spinner;\r\n","import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;\r\n","import React from 'react';\r\nimport './error-indicator.css';\r\n\r\nconst ErrorIndicator = () => {\r\n  return <div>Error!</div>;\r\n};\r\n\r\nexport default ErrorIndicator;\r\n","import React, { Component } from 'react';\r\nimport BookListItem from '../book-list-item';\r\n\r\nimport { bindActionCreators } from 'redux';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport { compose } from '../../utils';\r\n\r\nimport Spinner from '../spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nimport './book-list.css';\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {\r\n        books.map((book) => {\r\n          return (\r\n            <li key={book.id}>\r\n              <BookListItem\r\n                book={book}\r\n                onAddedToCart={() => onAddedToCart(book.id)}/>\r\n            </li>\r\n          );\r\n        })\r\n      }\r\n    </ul>\r\n  );\r\n};\r\n\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount() {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddedToCart } = this.props;\r\n\r\n    if (loading) {\r\n      return <Spinner />;\r\n    }\r\n\r\n    if (error) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return <BookList books={books} onAddedToCart={onAddedToCart}/>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error }}) => {\r\n  return { books, loading, error };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n\r\n  return bindActionCreators({\r\n    fetchBooks: fetchBooks(bookstoreService),\r\n    onAddedToCart: bookAddedToCart\r\n  }, dispatch);\r\n};\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer);\r\n","import BookList from './book-list';\r\n\r\nexport default BookList;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport {\r\n  bookAddedToCart,\r\n  bookRemovedFromCart,\r\n  allBooksRemovedFromCart } from '../../actions';\r\n\r\nimport './shopping-cart-table.css';\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, title, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\">\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\">\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\">\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n        { items.map(renderRow) }\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">\r\n        Total: ${total}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal }}) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  onIncrease: bookAddedToCart,\r\n  onDecrease: bookRemovedFromCart,\r\n  onDelete: allBooksRemovedFromCart\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import React from 'react';\r\nimport BookList from '../book-list';\r\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React from 'react';\r\n\r\nconst CartPage = () => {\r\n  return <div>Cart Page</div>\r\n};\r\n\r\nexport default CartPage;\r\n","import App from './app';\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport ShopHeader from '../shop-header';\r\nimport { HomePage, CartPage } from '../pages';\r\n\r\nimport './app.css';\r\n\r\nconst App = () => {\r\n  return (\r\n    <main role=\"main\" className=\"container\">\r\n      <ShopHeader numItems={5} total={210}/>\r\n      <Switch>\r\n        <Route\r\n          path=\"/\"\r\n          component={HomePage}\r\n          exact />\r\n\r\n        <Route\r\n          path=\"/cart\"\r\n          component={CartPage}\r\n          />\r\n      </Switch>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import ErrorBoundry from './error-boundry';\r\n\r\nexport default ErrorBoundry;\r\n","import React, { Component } from 'react';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  };\r\n\r\n  componentDidCatch() {\r\n    this.setState({ hasError: true });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}","\r\nexport default class BookstoreService {\r\n\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'Production-Ready Microservices',\r\n      author: 'Susan J. Fowler',\r\n      price: 32,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\r\n    {\r\n      id: 2,\r\n      title: 'Release It!',\r\n      author: 'Michael T. Nygard',\r\n      price: 45,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'}\r\n  ];\r\n\r\n  getBooks() {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        if (Math.random() > 1) {\r\n          reject(new Error('Something bad happened'));\r\n        } else {\r\n          resolve(this.data);\r\n        }\r\n      }, 700);\r\n    });\r\n  }\r\n}","const updateBookList = (state, action) => {\r\n\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null\r\n    };\r\n  }\r\n\r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload\r\n      };\r\n\r\n    default:\r\n      return state.bookList;\r\n  }\r\n};\r\n\r\nexport default updateBookList;\r\n","const updateCartItems = (cartItems, item, idx) => {\r\n\r\n  if (item.count === 0) {\r\n    return [\r\n      ...cartItems.slice(0, idx),\r\n      ...cartItems.slice(idx + 1)\r\n    ];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [\r\n      ...cartItems,\r\n      item\r\n    ];\r\n  }\r\n\r\n  return [\r\n    ...cartItems.slice(0, idx),\r\n    item,\r\n    ...cartItems.slice(idx + 1)\r\n  ];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n\r\n  const {\r\n    id = book.id,\r\n    count = 0,\r\n    title = book.title,\r\n    total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity*book.price\r\n  };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const { bookList: { books }, shoppingCart: { cartItems }} = state;\r\n\r\n  const book = books.find(({id}) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({id}) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n  return {\r\n    orderTotal: 0,\r\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n  };\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      orderTotal: 0\r\n    }\r\n  }\r\n\r\n  switch(action.type) {\r\n    case 'BOOK_ADDED_TO_CART':\r\n      return updateOrder(state, action.payload, 1);\r\n\r\n    case 'BOOK_REMOVED_FROM_CART':\r\n      return updateOrder(state, action.payload, -1);\r\n\r\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n      const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload);\r\n      return updateOrder(state, action.payload, -item.count);\r\n\r\n    default:\r\n      return state.shoppingCart;\r\n  }\r\n};\r\n\r\nexport default updateShoppingCart;\r\n","import updateBookList from './book-list';\r\nimport updateShoppingCart from './shopping-cart';\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  };\r\n};\r\n\r\nexport default reducer;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nimport App from './components/app';\r\nimport ErrorBoundry from './components/error-boundry';\r\nimport BookstoreService from './services/bookstore-service';\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\r\n\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <BookstoreServiceProvider value={bookstoreService}>\r\n        <Router>\r\n          <App />\r\n        </Router>\r\n      </BookstoreServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}